{{>mainmenu}}

<div class="ui stacked segment">
    <form action="/saveChanges/{{island.id}}" method="POST">
        <div class="ui ten wide column fluid form">
            <div class="field">
            <label>Name</label>
            <input type="text" name="name" value="{{island.name}}"/>
        </div>
            <h4 class="ui horizontal divider header">
                <i class="file alternate outline icon"></i>
                Description
            </h4>
        <div class="field">
            <label>Description</label>
            <textarea name="description" value="{{island.description}}"></textarea>
        </div>
        </div>
        <h4 class="ui horizontal divider header">
            <i class="globe icon"></i>
            Location
        </h4>
        <table class="ui definition table">
            <tbody>
            <tr>
                <td class="two wide column">Category</td>
                <td>
                <select class="ui dropdown" name="category">
                    <option value="{{island.category}}">{{island.category}}</option>
                    <option value="North East">North East</option>
                    <option value="East Coast">East Coast</option>
                    <option value="South Coast">South Coast</option>
                    <option value="Mid West">Mid West</option>
                    <option value="North West">North West</option>
                </select>
                </td>
            </tr>
            <tr>
                <td>Latitude</td>
                <td><div class="ui input"><input type="text" name="latitude" value="{{island.latitude}}"></div></td>
            </tr>
            <tr>
                <td>Longitude</td>
                <td><div class="ui input"><input type="text" name="longitude" value="{{island.longitude}}"></div></td>
            </tr>
            </tbody>
        </table>
        <h4 class="ui horizontal divider header">
            <i class="file image outline icon"></i>
            Gallery
        </h4>
        <button id="upload_widget" class="ui button" type="button">Upload files</button>
            <script type="text/javascript">
                const myWidget = cloudinary.createUploadWidget({
                    cloudName: 'doc1qd54g',
                    uploadPreset: 'oxnqgnlu',
                    sources: [ 'local', 'url', 'image_search'],
                    googleApiKey: 'AIzaSyBY4YLivx-OyLXSfXgZN69roFURi2Fe0wA',
                    tags: ['{{island.id}}'] }, (error, result) => { console.log(error, result) })
                document.getElementById("upload_widget").addEventListener("click", function(){
                    myWidget.open();
                }, false);
            </script>
        <br /><br />
        <div id="gallery" style="max-width: 80%"></div>
            <script type="text/javascript">
                const gallery = cloudinary.galleryWidget({
                    container: "#gallery",
                    cloudName: "doc1qd54g",
                    mediaAssets: [
                        {tag: '{{island.id}}'},
                    ]
                });
                gallery.update({mediaAssets: [{ tag: '{{island.id}}' }]});
                gallery.render();
            </script>
        <div class="ui divider"></div>
        <button class="ui submit button" type="submit">Save changes</button>
    </form>

</div>